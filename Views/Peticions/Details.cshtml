@model AppV1.Models.Peticion

@{
    ViewData["Title"] = "Details";
}
<div class="container mt-3 p-4" style="background-color:white;">
    <h1 class="mb-3 pb-2" style="text-align:center;">Detalles</h1>
    <h4>Peticion</h4>
    <hr />
    <dl class="row">
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.Estado)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.Estado)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.Asunto)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.Asunto)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.Description)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.Description)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.Fecha)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.Fecha)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.EmailEmisor)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.EmailEmisor)
        </dd>
    </dl>
    <div class="d-inline-flex">
        @if (Model.Estado.Equals("Pendiente"))
        {
           <a class="btn btn-outline-success m-1" asp-controller="Buscador" asp-action="Consulta" asp-route-id="@Model.PeticionID">Realizar Búsqueda</a> 
        }    
        @if (Model.Estado.Equals("En progreso"))
        {
           <a class="btn btn-outline-success m-1" asp-controller="Buscador"  asp-action="Consulta" asp-route-id="@Model.PeticionID">Realizar Búsqueda</a> 
           <a class="btn btn-outline-warning m-1" asp-action="Finalizar" asp-route-id="@Model.PeticionID">Finalizar</a>           
        }  
    <a class="btn btn-primary m-1" asp-action="Index">Volver a la lista</a>
    </div>
    
    @if (Model.HistorialBusquedas is not null)
    {
    <h1 class="mb-3 pb-2" style="text-align:center;">Resultados Útiles</h1>
    <table class="table ">
        <thead class="table-dark">
            <tr>
                <th>
                    Id
                </th>
                <th>
                    Fecha
                </th>
                <th>
                    URL
                </th>
                <th></th>
            </tr>
        </thead>
        <tbody>
    @foreach (var item in Model.HistorialBusquedas) {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.Id)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Fecha)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.URL)
                </td>
            
                <td>
                    <a  class="btn btn-success" href="@item.URL">Ir al link</a> 
                </td>
            </tr>
    }
        </tbody>
    </table>
    }
</div>
